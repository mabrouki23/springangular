{"ast":null,"code":"import { CommandeProduct } from '../models/commandeProduct.model';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { PopUpComponent } from '../pop-up/pop-up.component';\nimport { DialogOtherCategroyComponent } from '../dialog-other-categroy/dialog-other-categroy.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../category-service.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"../commande.service\";\nimport * as i5 from \"@angular/flex-layout/flex\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/card\";\n\nfunction ProductComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelementStart(1, \"mat-card\", 4);\n    i0.ɵɵlistener(\"click\", function ProductComponent_div_2_Template_mat_card_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.addProductToCommande(product_r1);\n    });\n    i0.ɵɵelementStart(2, \"mat-card-header\");\n    i0.ɵɵelementStart(3, \"mat-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 5);\n    i0.ɵɵelementStart(6, \"mat-card-content\");\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"mat-card-actions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r1.productName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"data:image/jpeg;base64,\", product_r1.data, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", product_r1.productName, \" \");\n  }\n}\n\nexport let ProductComponent = /*#__PURE__*/(() => {\n  class ProductComponent {\n    constructor(categoryService, _activtedRoute, _router, dialog, commandeService) {\n      this.categoryService = categoryService;\n      this._activtedRoute = _activtedRoute;\n      this._router = _router;\n      this.dialog = dialog;\n      this.commandeService = commandeService;\n      this.products = [];\n      this.selectedProductsList = [];\n      this.value = 1;\n      this.existe = true;\n      this.commande = this._router.getCurrentNavigation().extras.state;\n    }\n\n    ngOnInit() {\n      this.categoryId = this._activtedRoute.snapshot.params['id'];\n      this.getAllProductsByCategory();\n    }\n\n    getAllProductsByCategory() {\n      this.categoryService.getProductsByCategoryId(this.categoryId).subscribe(data => {\n        this.products = data._embedded.products;\n        console.log(data._embedded.products);\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    addProductToCommande(product) {\n      this.commandeProduct = new CommandeProduct(); //rechercher le produit dans le tableau s'il existe mettre a jour la qantite sinon add le produit au tableau\n\n      this.commandeProduct.product = product; //initialiser la qunatite par la valeur 1 \n\n      this.commandeProduct.quantite = 1; //todo pour entrer la quantite   \n\n      this.commande.commandeProducts.push(this.commandeProduct);\n      this.openDialog();\n    }\n\n    openDialog() {\n      const dialogConfig = new MatDialogConfig();\n      dialogConfig.position = {\n        'top': '0',\n        left: '0'\n      };\n      dialogConfig.disableClose = true;\n      dialogConfig.autoFocus = true;\n      let dialogRef = this.dialog.open(PopUpComponent, {\n        data: this.value\n      });\n      dialogRef.afterClosed().subscribe(res => {\n        // received data from dialog-component\n        console.log(res.data);\n        console.log(this.commande.commandeId);\n        this.commandeProduct.quantite = res.data;\n        this.openDialogOtherCategory();\n      });\n    }\n\n    openDialogOtherCategory() {\n      let dialogRef = this.dialog.open(DialogOtherCategroyComponent, {\n        data: {\n          name: 'Vishwas'\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        console.log(`Dialog result: ${result}`);\n\n        if (result == 2) {\n          this._router.navigate(['/categories'], {\n            state: this.commande\n          });\n        }\n\n        if (result == 3) {\n          this._router.navigate(['/commandeClient'], {\n            state: this.commande\n          });\n        }\n      });\n    }\n\n  }\n\n  ProductComponent.ɵfac = function ProductComponent_Factory(t) {\n    return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.CategoryServiceService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.CommandeService));\n  };\n\n  ProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductComponent,\n    selectors: [[\"app-product\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"content\", \"mat-elevation-z8\"], [\"fxLayout\", \"row wrap\", \"fxLayoutGap\", \"16px grid\"], [\"fxFlex\", \"25%\", \"fxFlex.xs\", \"100%\", \"fxFlex.sm\", \"33%\", 4, \"ngFor\", \"ngForOf\"], [\"fxFlex\", \"25%\", \"fxFlex.xs\", \"100%\", \"fxFlex.sm\", \"33%\"], [\"appMaterialElevation\", \"\", 1, \"mat-elevation-z4\", 3, \"click\"], [\"mat-card-image\", \"\", 1, \"imgs\", 3, \"src\"]],\n    template: function ProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProductComponent_div_2_Template, 10, 3, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    directives: [i5.DefaultLayoutDirective, i5.DefaultLayoutGapDirective, i6.NgForOf, i5.DefaultFlexDirective, i7.MatCard, i7.MatCardHeader, i7.MatCardTitle, i7.MatCardImage, i7.MatCardContent, i7.MatCardActions],\n    styles: [\".imgs[_ngcontent-%COMP%]{height:200px;width:200px}\"]\n  });\n  return ProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}